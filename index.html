<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vivid Zen Sakura</title> <!-- Updated Title -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Serif:wght@400;600&family=Inconsolata&display=swap" rel="stylesheet">
    <style>
        :root {
            --transition-speed: 0.8s;
            /* --- Vivid Zen Sakura Theme --- */
            /* Background: Soft, flowing gradient */
            --sakura-grad-start: #FFF5F7; /* Very light pink */
            --sakura-grad-end: #FFE6EA;   /* Soft warm pink */

            /* Text: Maintain good contrast */
            --sakura-text: #5C3740; /* Darker, slightly desaturated rose */

            /* Accent: Vivid, eye-catching pink for YinYang/Highlights */
            --sakura-accent-vivid: #E66793; /* Vibrant Rose Pink */

            /* Content Box: Harmonious, slightly translucent */
            --sakura-content-bg: rgba(255, 235, 240, 0.92); /* Lighter, clearer pink base */

            /* Shadow/Glow: Soft but present */
            --sakura-shadow: rgba(100, 60, 70, 0.15);
            --sakura-glow: rgba(230, 103, 147, 0.65); /* Glow matching vivid accent */
        }

        *, *::before, *::after {
             box-sizing: border-box; /* Apply box-sizing universally */
        }

        body {
            margin: 0;
            padding: 20px 10px; /* Add some padding around the container */
            min-height: 100vh; /* Ensure body takes at least full height */
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: 'Roboto Serif', serif;
            text-align: center;
            /* Apply Vivid Sakura gradient background */
            background: linear-gradient(135deg, var(--sakura-grad-start), var(--sakura-grad-end));
            background-attachment: fixed; /* Keep gradient fixed during scroll */
            color: var(--sakura-text);
            overflow-x: hidden; /* Prevent horizontal scroll on body */
        }

        .container {
            width: 100%; /* Take full width allowed by body padding */
            max-width: 800px; /* Increase max-width for better screen fill */
            user-select: none;
            position: relative;
            padding: 30px 0; /* Vertical padding within container */
        }

        .yin-yang {
            font-size: 130px; /* Significantly larger */
            cursor: pointer;
            animation: subtle-bounce 3.5s infinite; /* Slightly slower bounce */
            transition: transform 1.2s ease-in-out; /* Smooth transform */
            position: relative;
            transform-origin: center center;
            color: var(--sakura-accent-vivid); /* Use the vivid accent */
            margin-bottom: 15px;
            line-height: 1; /* Prevent extra space due to large font size */
        }

        @keyframes subtle-bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-8px); }
        }

        .flip {
            animation: flip 1.2s forwards;
        }
        @keyframes flip {
            from { transform: rotateY(0deg); }
            to { transform: rotateY(720deg); }
        }

        .content {
            background-color: var(--sakura-content-bg);
            color: var(--sakura-text);
            display: none;
            white-space: pre-wrap;   /* Respect intended line breaks */
            overflow-wrap: break-word; /* Force break long words - FIX for horizontal scroll */
            word-wrap: break-word;    /* Legacy support */
            line-height: 1.75;        /* Increased for larger font */
            font-size: 1.2em;         /* Larger base text size */
            height: auto;
            max-height: 65vh;         /* Generous max height */
            overflow-x: hidden;
            overflow-y: auto;
            padding: 30px 35px;       /* More padding */
            border-radius: 18px;      /* Slightly larger radius */
            box-shadow: 0 10px 25px var(--sakura-shadow);
            margin: 25px auto 0;
            opacity: 0;
            transition: opacity 0.8s ease;
            text-align: center;
            /* Remove width: fit-content; Use container's width constraint */
            max-width: 100%; /* Ensure it doesn't exceed container */
        }

        .show {
            display: block;
            opacity: 1;
        }

        .choice {
            font-size: 1.1em; /* Slightly larger */
            margin-top: 10px;
            margin-bottom: 25px;
            font-weight: 400;
            opacity: 0.75;
            transition: opacity 0.5s ease;
            color: var(--sakura-accent-vivid); /* Match YinYang color */
        }

        #snippet-display .empty-paren {
            font-size: 2em; /* Larger empty paren */
            margin: 0.6em 0;
            color: var(--sakura-accent-vivid);
            letter-spacing: 0.1em;
            display: block;
        }

        /* About Section Styling */
        .about {
            position: absolute;
            top: 20px;
            right: 20px;
            cursor: pointer;
            font-size: 20px; /* Slightly larger */
            opacity: 0.7;
            transition: opacity 0.3s;
            color: var(--sakura-accent-vivid);
        }
        .about:hover {
            opacity: 1;
        }
        .about-content {
            display: none;
            position: absolute;
            top: 55px; /* Adjusted position */
            right: 20px;
            background-color: rgba(255, 245, 247, 0.98); /* Lighter, more opaque */
            color: var(--sakura-text);
            padding: 18px;
            border-radius: 10px;
            box-shadow: 0 6px 18px var(--sakura-shadow);
            z-index: 10;
            max-width: 85%; /* Allow slightly wider on mobile */
            text-align: left;
            font-size: 0.95em;
        }
        .about-content a {
            color: #CC6A8F; /* Adjusted link color */
            text-decoration: none;
            font-weight: 600;
        }
        .about-content a:hover {
            text-decoration: underline;
        }
        .about-content strong {
             color: #B35C7E; /* Slightly darker for emphasis */
        }

        /* Active YinYang - Vivid Glow */
        .yin-yang.active {
            animation:
                subtle-glow-sakura-vivid 3s ease-in-out infinite,
                occasional-spin 18s linear infinite; /* Slightly slower spin */
        }
        @keyframes subtle-glow-sakura-vivid {
            0%, 100% { filter: drop-shadow(0 0 5px var(--sakura-glow)); transform: scale(1) translateY(0); } /* Added translateY for bounce sync */
            50% { filter: drop-shadow(0 0 12px var(--sakura-glow)); transform: scale(1.03) translateY(-8px); } /* Stronger glow, sync bounce */
        }
        @keyframes occasional-spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }


        @media (min-width: 600px) {
            .about-content { max-width: 320px; } /* Slightly wider max on desktop */
        }
        .show-about { display: block; }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
             .yin-yang { font-size: 110px; }
             .content { font-size: 1.1em; padding: 25px 30px; max-height: 60vh;}
             .container { padding: 20px 0; }
        }

        @media (max-width: 480px) {
            body { padding: 15px 5px; } /* Less padding on small screens */
            .container { padding: 15px 0; }
            .yin-yang { font-size: 90px; }
            .content {
                 font-size: 1.05em;
                 padding: 20px 20px; /* Less padding inside box */
                 max-height: 55vh;
                 border-radius: 15px;
             }
            .choice { font-size: 1em; }
            .about { font-size: 18px; top: 15px; right: 15px;}
            .about-content { top: 45px; right: 15px; }
        }

    </style>
</head>
<body>
    <div class="container">
        <div class="about" id="about-toggle">ⓘ</div>
        <div class="about-content" id="about-content">
             <span id="close-about" style="float:right;cursor:pointer; padding: 0 5px; font-size: 1.2em;">✖</span>
            <p><strong>Vivid Zen Sakura</strong></p>
            <p>Reflections on non-separation, born from human-AI dialogue.</p>
             <p>Click ☯ for a moment of insight.</p>
             <p>Edit or add thoughts in `snippets.js`.</p>
            <p><small>Co-created with: Maitreya, GPT models, O3-Mini, Grok 3, DeepSeek v3, Gemini 2 Pro.</small></p>
            <p><a href="https://linktr.ee/maitreyal0v3" target="_blank" rel="noopener noreferrer">My socials</a></p>
        </div>

        <div class="yin-yang" id="toggle">☯</div>
        <div class="choice" id="choice-text">Click for a reflection</div>

        <div class="content" id="snippet-display">
            <!-- Snippets loaded here -->
        </div>
    </div>

    <script src="snippets.js"></script>
    <script>
        // --- JavaScript remains largely the same ---
        // No theme switching needed, focus is on snippet display & animations
        document.addEventListener('DOMContentLoaded', () => {
            const toggle = document.getElementById('toggle');
            const snippetDisplay = document.getElementById('snippet-display');
            const choiceText = document.getElementById('choice-text');
            // const body = document.body; // Not needed for theme switching
            const aboutToggle = document.getElementById('about-toggle');
            const aboutContent = document.getElementById('about-content');
            const closeAbout = document.getElementById('close-about');

            let firstClick = true;

            function displayRandomSnippet() {
                if (typeof snippets !== 'undefined' && snippets.length > 0) {
                    const randomIndex = Math.floor(Math.random() * snippets.length);
                    const randomSnippet = snippets[randomIndex];

                    let contentHTML = '';
                    if (randomSnippet.trim() === '( )') {
                         contentHTML = `<span class="empty-paren">${randomSnippet}</span>`;
                    } else {
                         const tempDiv = document.createElement('div');
                         tempDiv.textContent = randomSnippet;
                         contentHTML = tempDiv.innerHTML; // Basic HTML escaping
                    }

                    if (!snippetDisplay.classList.contains('show')) {
                        snippetDisplay.innerHTML = contentHTML;
                        setTimeout(() => snippetDisplay.classList.add('show'), 50);
                    } else {
                        snippetDisplay.style.opacity = '0';
                        setTimeout(() => {
                             snippetDisplay.innerHTML = contentHTML;
                             // Scroll to top of content box if it's scrollable and long
                             if (snippetDisplay.scrollHeight > snippetDisplay.clientHeight) {
                                 snippetDisplay.scrollTop = 0;
                             }
                             snippetDisplay.style.opacity = '1';
                        }, 400); // Match half the opacity transition
                    }

                } else {
                    snippetDisplay.textContent = "Error: Snippets not loaded.";
                    if (!snippetDisplay.classList.contains('show')) {
                         setTimeout(() => snippetDisplay.classList.add('show'), 50);
                     }
                }
            }

            toggle.addEventListener('click', () => {
                if (firstClick) {
                    firstClick = false;
                    toggle.classList.add('flip');

                    setTimeout(() => {
                        choiceText.style.transition = 'opacity 0.5s ease';
                        choiceText.style.opacity = '0';
                        choiceText.style.pointerEvents = 'none';

                        displayRandomSnippet();
                        toggle.classList.add('active');

                        // Optional: remove flip class if needed later
                        // setTimeout(() => toggle.classList.remove('flip'), 1200);

                    }, 600);

                } else {
                     toggle.style.transform = 'scale(1.1)';
                     setTimeout(()=> toggle.style.transform = '', 150);
                    displayRandomSnippet();
                }
            });

            // --- About section logic (no functional changes needed) ---
            aboutToggle.addEventListener('click', (e) => {
                e.stopPropagation();
                aboutContent.classList.toggle('show-about');
            });
            closeAbout.addEventListener('click', (e) => {
                 e.stopPropagation();
                 aboutContent.classList.remove('show-about');
            });
             document.addEventListener('click', (e) => {
                if (aboutContent.classList.contains('show-about') &&
                    !aboutContent.contains(e.target) &&
                    e.target !== aboutToggle) {
                   aboutContent.classList.remove('show-about');
                }
             });
        });
    </script>
</body>
</html>